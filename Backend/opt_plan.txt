本期优化点：
1、指定位置的单、多人物参考生成： done
    基础位置：（123456789）
    细节位置：（123456789）
    区域比例：（竖正横）
    区域面积：（小中大）

2、大分镜、小分镜：done
    1）分镜prompt优化
    2）分镜：角色、场景、分镜图prompt改为dropdown

3、三库存储与加载： done
    1）角色名、场景名、动作名
    2）库存储
    3）点击假删除



二期优化点：

1、现有的多角色布局可控生成优化  done
2、故事名的位置控制 done
3、库存储时，过滤相同/相似md5文件  done


三期优化点：

omost研究使用
（专利点：生成场景风格一致、角色ID一致，多种详细设定可控的图片。）
1、借用 llm，对于一句prompt，分解细化成多个子prompt。
        （1）全局prompt：生成全局的风格参考图
        （2）多个区域的信息和prompt：生成多个区域的参考图与mask图
2、利用adapter技术，将全局风格参考图、局部区域参考图、局部区域mask图，综合生成一个整图

    优化方案：在每个分镜生成的 角色、场景、prompt下增加一个textbox 和一个细化prompt按钮。textbox生成内容格式如下：
        1）全局->场景：xx；prompt：xxxx        ref场景图，生成相同语义的全局场景图 
        2）局部->位置大小比例：xxx；            生成局部mask图
        3）角色：xx/None；场景：xx/None；prompt：xxxx          ref角色图和场景图，生成语义一致的局部图
        4）最后将 全局场景图 + 背景图mask + 局部图 + 局部mask图 合成一个完整含义的图

3、 omost和ip adapter的结合使用


四期优化点：

（专利点：生成场景风格一致、角色ID一致、角色动作可控的图片。）
1、单人动作库设计
    1）基于通用prompt生成动作概念图
    2）基于提示分割模型，生成单人动作mask + 单人构图参考前景图

2、单人物单动作参考生成
    基于 角色参考图、单人动作mask + 单人构图参考前景图，生成 角色一致的单人物动作参考图
    
    最后将 全局图 + 全局图mask + 角色动作图 + 角色图mask 合成一个完整含义的图

3、带背景的多人物多动作参考生成
   1） 基于多个角色，选定角色的构图位置，生成多个角色的角色位置mask图，以及背景mask图
   2） 将 场景参考图 + 背景mask图 + 角色动作图 + 角色位置mask图，合成生成带背景的多人物多动作图




四期优化点：

1、一个图中存在多个风格的场景mask
    分成多个区域，每个区域生成mask

2、小分镜图：动画化(p4)

3、片头曲、片头动画

4、片尾曲、片尾动画

5、背景音乐接入suno